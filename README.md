Pure Python partition function, no imports, ported from SageMath.
